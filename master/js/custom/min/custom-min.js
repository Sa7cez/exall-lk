!function(e,a,$,t){$(function(){var e={RUB:"1",CNY:"1",ZAR:"1",RON:"1",USD:"1",EUR:"1",JPR:"1",DKK:"1"},t="jq-appCurInfo",o=$.localStorage.get(t)||e;$.localStorage.set(t,o),$.each(o,function(e,a){1==a?($("#"+e+"_info").show(),$('.chooser_popup input[value="'+e+'"]').prop("checked",!0)):($("#"+e+"_info").hide(),$('.chooser_popup input[value="'+e+'"]').prop("checked",!1))}),$(a).on("change",".chooser_popup input",function(){var a=$.localStorage.get(t)||e;$(this).is(":checked")?(a[$(this).val()]="1",$.localStorage.set(t,a),$("#"+$(this).val()+"_info").show()):(a[$(this).val()]="0",$.localStorage.set(t,a),$("#"+$(this).val()+"_info").hide())});var l=150;$(".buysell_popup").slideUp(1),$(a).on("click","#buysell tbody [role=row]",function(){$(".buysell_popup").css("top",$(this).position().top+47).slideDown(l)}),$(a).on("click","[data-tool=popup-hide]",function(){$(".buysell_popup").slideUp(l)}),$("body").on("click",function(e){$("[data-tool=popup-hide]").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".buysell_popup").has(e.target).length||$(".buysell_popup").slideUp(l)}),$("#create_order_buy").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$("#create_order_buy").has(e.target).length||$("#create_order_buy").slideUp(l)}),$("#create_order_sell").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$("#create_order_sell").has(e.target).length||$("#create_order_sell").slideUp(l)}),$(".offsidebar .profile").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".offsidebar .profile").has(e.target).length||$("body").removeClass("offsidebar-open")}),$(".chooser").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".chooser").has(e.target).length||$(".chooser").removeClass("open")})}),$(a).on("click",".chooser .icon-down-arrow",function(){$(this).parent().toggleClass("open")}),$(a).on("click",".buysell_popup .closed",function(){$(this).parent().find(".opened").toggleClass("opened").toggleClass("closed"),$(this).toggleClass("opened").toggleClass("closed")}),$(a).on("click",".buysell_popup .opened .close-order",function(){$(this).parent().parent().removeClass("opened").addClass("closed")}),$(".sortable").sortable({forcePlaceholderSize:!0,placeholder:'<div class="box-placeholder p0 m0"><div></div></div>'}),$(a).on("change",".plus select",function(){var e=$(this).val(),a=$(this).val();""!=e&&($(this).find("option[value='"+e+"']").remove(),$(this).select2("val",""),$("#"+$(this).attr("id").replace("-filter","")).append('<li class="list-group-item" value="'+e+'"><em class="icon-dashboard text-muted mr-lg"></em>'+a+'<div class="remove"></div></li>').sortable({forcePlaceholderSize:!0,placeholder:'<div class="box-placeholder p0 m0"><div></div></div>'}).parent().fadeIn(),$("#"+$(this).attr("id").replace("filter","inputs")).append('<div class="'+e+'-field clearfix"><div class="col"><label><span><span data-localize="trades.popup.LABEL2">Cost in </span> <span> '+a+'</span></span><input class="form-control input-sm" name="'+e+'-cost"></label></div><div class="col2"><span><span data-localize="trades.popup.LABEL_FEE">With fee </span> (<span class="percent">0.26</span> <span>'+a+')</span></span><input class="form-control input-sm" name="'+e+'-cost-with-fee"></label></div></div>').find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")})),1==$(this).find("option").length&&$(this).prop("disabled",!0)}),$(a).on("click",".sortable li .remove",function(e){var a=$.trim($(this).parent().text());$("#"+$(this).parent().parent().attr("id")+"-filter").append('<option value="'+a+'">'+a+"</option").select2({minimumResultsForSearch:"Infinity",width:"resolve"}).prop("disabled",!1),$("#"+$(this).parent().parent().attr("id")+"-inputs").find("."+a+"-field").remove();var t="#"+$(this).parent().parent().attr("id");$(this).parent().remove(),0==$(t).find("li").length&&$(t).parent().fadeOut()}),$(a).on("click","[data-action=create_order_buy]",function(){return $("#create_order_buy").slideDown(),!1}),$(a).on("click","[data-action=create_order_sell]",function(){return $("#create_order_sell").slideDown(),!1}),$(a).on("click","#create_order_buy .hide_it",function(){$("#create_order_buy").slideUp()}),$(a).on("click","#create_order_sell .hide_it",function(){$("#create_order_sell").slideUp()}),$(a).on("click",".settings-panel .close-settings",function(){$(this).parent().toggle()}),$(a).on("click",".settings .arrow",function(){return $(this).parent().parent().find(".settings-panel").toggle(),!1}),$(a).on("click","#orders .nav li",function(){$(this).parent().parent().find(".favorite-selector, .payment-selector").select2({})}),$("#ordersBuy, #ordersSell").dataTable({paging:!0,searching:!1,lengthChange:!1,bInfo:!1,sDom:"<'row'<'col-xs-6'l><'col-xs-6'f>r>t<'row'p<'show-closed'>>",language:{paginate:{first:"«",previous:"«",next:"»",last:"»"}},pageLength:7,pagingType:"simple_numbers",sAjaxSource:"../server/manage_orders.json",aoColumns:[{sClass:"message",mData:"message"},{mData:"order_name"},{mData:"btc"},{mData:"amount"},{mData:"status"},{mData:"date"},{sClass:"arrow",bSortable:!1,sDefaultContent:'<span class="icon-down-arrow"></span>',mData:null}],initComplete:function(){this.parent().find(".show-closed").append('<button class="button btn btn-transparent"></button>'),this.parent().find(".show-closed button").attr("data-localize","trades.SHOWCLOSED").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")})},fnDrawCallback:function(){this.parent().find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")}),$("#paymentTop").matchHeight._update()}}),$("#orders-buy-table, #orders-sell-table").dataTable({paging:!0,searching:!0,lengthChange:!1,bInfo:!1,sDom:"<'row'<'col-xs-6 col-md-7'f><'col-xs-6 col-md-5'<'fav dataTables_filter'>>r><'row'<'col-xs-12'<'currencies'>>>t<'row'p>",language:{paginate:{first:"«",previous:"«",next:"»",last:"»"}},oLanguage:{sSearch:'<i class="icon-magnifier"></i>'},pageLength:14,pagingType:"simple_numbers",sAjaxSource:"../server/orders.json",aoColumns:[{sClass:"price",mData:"price"},{mData:"amount"},{sClass:"payment",bSortable:!1,mData:"payment"},{sClass:"seller",mData:"seller"},{sType:"numeric",sClass:"rating",mData:"rating"},{sClass:"buy_button",bSortable:!1,sDefaultContent:'<a href="#" data-localize="trades.BUY" class="btn btn-orange btn-sm"></a>',mData:null}],initComplete:function(){this.parent().find("[type=search]").attr("data-localize","trades.SEARCH").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")}),this.parent().find(".fav").append('<label class="control-label mb"><i class="icon-favorite"></i><select id="fav-'+this.attr("id")+'" class="favorite-selector form-control" name="favorite" value=""><option class="default" value="" data-localize="trades.FAVORITE"></option><option value="Константин Константинопольский">Константин Константинопольский</option><option value="Александридис Константинопулос">Александридис Константинопулос</option><option value="Валерий Панфилов">Валерий Панфилов</option><option value="Александр Валерьев">Александр Валерьев</option></select></label>');var e="fav-"+this.attr("id");this.parent().find(".currencies").append('<a href="#" class="active">RUB</a><a href="#">USD</a><a href="#">EUR</a>'),this.api().columns(".payment").every(function(){var e=this,a=$('<select class="payment-selector form-control"><option data-localize="trades.PAYMENTSYSTEM" value=""></option></select>').appendTo($(e.header()).empty()).on("change",function(){var a=$.fn.dataTable.util.escapeRegex($(this).val());e.search(a?"^"+a+"$":"",!0,!1).draw()});e.data().unique().sort().each(function(e,t){a.append('<option value="'+e+'">'+e+"</option>")}),a.wrap("<div class='select-wrapper'></div>").find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")})}),this.parent().find(".fav, .buy_button").find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")}),$(".favorite-selector").select2({}),$(".payment-selector").select2({}),this.api().column(".seller").every(function(){var a="",t=this,o=$("#"+e).on("click",function(){$("#select2-"+e+"-results li:first").text("Отменить")}).on("change",function(){a=$.fn.dataTable.util.escapeRegex($(this).val()),t.search(a?"^"+a+"$":"",!0,!1).draw(),""==a?$("#"+e).parent().find(".select2-selection__rendered").css("color","#B8BBCA"):$("#"+e).parent().find(".select2-selection__rendered").css("color","#000")})}),$("#paymentTop").matchHeight({byRow:!0,property:"height",target:$("#buysell"),remove:!1})},fnDrawCallback:function(){this.parent().find(".buy_button").find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")})}})})}(window,document,window.jQuery);