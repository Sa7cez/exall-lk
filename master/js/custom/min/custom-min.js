!function(e,a,$,t){$(function(){var e={RUB:"1",CNY:"1",ZAR:"1",RON:"1",USD:"1",EUR:"1",JPR:"1",DKK:"1"},t="jq-appCurInfo",o=$.localStorage.get(t)||e;$.localStorage.set(t,o),$.each(o,function(e,a){1==a?($("#"+e+"_info").show(),$('.chooser_popup input[value="'+e+'"]').prop("checked",!0)):($("#"+e+"_info").hide(),$('.chooser_popup input[value="'+e+'"]').prop("checked",!1))}),$(a).on("change",".chooser_popup input",function(){var a=$.localStorage.get(t)||e;$(this).is(":checked")?(a[$(this).val()]="1",$.localStorage.set(t,a),$("#"+$(this).val()+"_info").show()):(a[$(this).val()]="0",$.localStorage.set(t,a),$("#"+$(this).val()+"_info").hide())}),$(".buysell_popup").slideUp(),$(a).on("click","#buysell tbody [role=row]",function(){$(".buysell_popup").css("top",$(this).position().top+47).slideToggle()}),$(a).on("click","[data-tool=popup-hide]",function(){$(".buysell_popup").slideUp()}),$("body").on("click",function(e){$("[data-tool=popup-hide]").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".buysell_popup").has(e.target).length||$(".buysell_popup").slideUp()}),$("#create_order_buy").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$("#create_order_buy").has(e.target).length||$("#create_order_buy").slideUp()}),$("#create_order_sell").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$("#create_order_sell").has(e.target).length||$("#create_order_sell").slideUp()}),$(".offsidebar .profile").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".offsidebar .profile").has(e.target).length||$("body").removeClass("offsidebar-open")}),$(".chooser").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".chooser").has(e.target).length||$(".chooser").removeClass("open")})}),$(a).on("click",".chooser .icon-down-arrow",function(){$(this).parent().toggleClass("open")}),$(a).on("click",".buysell_popup .to-open",function(){$(this).parent().find(".opened").toggleClass("opened").toggleClass("closed"),$(this).toggleClass("opened").toggleClass("closed")}),$(".sortable").sortable({forcePlaceholderSize:!0,placeholder:'<div class="box-placeholder p0 m0"><div></div></div>'}),$("#payment-list-filter").prop("disabled",!0),$(a).on("change",".plus select",function(){var e=$(this).val(),a=$(this).val();""!=e&&($(this).find("option[value='"+e+"']").remove(),$(this).select2("val",""),$("#"+$(this).attr("id").replace("-filter","")).append('<li class="list-group-item" value="'+e+'"><em class="icon-dashboard text-muted mr-lg"></em>'+a+'<div class="remove"></div></li>').sortable({forcePlaceholderSize:!0,placeholder:'<div class="box-placeholder p0 m0"><div></div></div>'})),console.log(1==$(this).find("option").length),1==$(this).find("option").length&&$(this).prop("disabled",!0)}),$(a).on("click",".sortable li .remove",function(e){var a=$.trim($(this).parent().text());$("#"+$(this).parent().parent().attr("id")+"-filter").append('<option value="'+a+'">'+a+"</option").select2({minimumResultsForSearch:1/0}).prop("disabled",!1),$(this).parent().remove()}),$(a).on("click","[data-action=create_order_buy]",function(){return $("#create_order_buy").slideDown(),!1}),$(a).on("click","[data-action=create_order_sell]",function(){return $("#create_order_sell").slideDown(),!1}),$(a).on("click","#create_order_buy .hide_it",function(){$("#create_order_buy").slideUp()}),$(a).on("click","#create_order_sell .hide_it",function(){$("#create_order_sell").slideUp()}),$(a).on("click",".settings-panel .close-settings",function(){$(this).parent().toggle()}),$(a).on("click",".settings .arrow",function(){return $(this).parent().parent().find(".settings-panel").toggle(),!1}),$("#ordersBuy, #ordersSell").dataTable({paging:!0,searching:!1,lengthChange:!1,bInfo:!1,sDom:"<'row'<'col-xs-6'l><'col-xs-6'f>r>t<'row'p<'show-closed'>>",language:{paginate:{first:"«",previous:"«",next:"»",last:"»"}},pageLength:7,pagingType:"simple_numbers",sAjaxSource:"../server/manage_orders.json",aoColumns:[{sClass:"message",mData:"message"},{mData:"order_name"},{mData:"btc"},{mData:"amount"},{mData:"status"},{mData:"date"},{sClass:"arrow",bSortable:!1,sDefaultContent:'<span class="icon-down-arrow"></span>',mData:null}],initComplete:function(){this.parent().find(".show-closed").append('<button class="button btn btn-transparent"></button>'),this.parent().find(".show-closed button").attr("data-localize","trades.SHOWCLOSED").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")})},fnDrawCallback:function(){this.parent().find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")}),$("#paymentTop").matchHeight._update()}}),$("#orders-buy-table, #orders-sell-table").dataTable({paging:!0,searching:!0,lengthChange:!1,bInfo:!1,sDom:"<'row'<'col-xs-6 col-md-7'f><'col-xs-6 col-md-5'<'fav dataTables_filter'>>r><'row'<'col-xs-12'<'currencies'>>>t<'row'p>",language:{paginate:{first:"«",previous:"«",next:"»",last:"»"}},oLanguage:{sSearch:'<i class="icon-magnifier"></i>'},pageLength:14,pagingType:"simple_numbers",sAjaxSource:"../server/orders.json",aoColumns:[{sClass:"price",mData:"price"},{mData:"amount"},{sClass:"payment",bSortable:!1,mData:"payment"},{sClass:"seller",mData:"seller"},{sClass:"rating",mData:"rating"},{sClass:"buy_button",bSortable:!1,sDefaultContent:'<a href="#" data-localize="trades.BUY" class="btn btn-orange btn-sm"></a>',mData:null}],initComplete:function(){this.parent().find("[type=search]").attr("data-localize","trades.SEARCH").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")}),this.parent().find(".fav").append('<label class="control-label mb"><i class="icon-favorite"></i><select id="fav-'+this.attr("id")+'" class="favorite-selector form-control" name="favorite" value=""><option class="default" value="" data-localize="trades.FAVORITE"></option><option value="Константин Константинопольский">Константин Константинопольский</option><option value="Александридис Константинопулос">Александридис Константинопулос</option><option value="Валерий Панфилов">Валерий Панфилов</option><option value="Александр Валерьев">Александр Валерьев</option></select></label>');var e="#fav-"+this.attr("id");this.parent().find(".currencies").append('<a href="#" class="active">RUB</a><a href="#">USD</a><a href="#">EUR</a>'),this.api().columns(".payment").every(function(){var e=this,a=$('<select class="payment-selector form-control"><option data-localize="trades.PAYMENTSYSTEM" value=""></option></select>').appendTo($(e.header()).empty()).on("change",function(){var a=$.fn.dataTable.util.escapeRegex($(this).val());e.search(a?"^"+a+"$":"",!0,!1).draw()});e.data().unique().sort().each(function(e,t){a.append('<option value="'+e+'">'+e+"</option>")}),a.wrap("<div class='select-wrapper'></div>").find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")})}),this.parent().find(".fav, .buy_button").find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")}),$(".favorite-selector").select2({}),$(".payment-selector").select2({}),this.api().column(".seller").every(function(){var a="",t=this,o=$(e).on("change",function(){a=$.fn.dataTable.util.escapeRegex($(this).val()),t.search(a?"^"+a+"$":"",!0,!1).draw(),console.log(e),""==a?$(e).parent().find(".select2-selection__rendered").css("color","#B8BBCA"):$(e).parent().find(".select2-selection__rendered").css("color","#000")})}),$("#paymentTop").matchHeight({byRow:!0,property:"height",target:$("#buysell"),remove:!1})},fnDrawCallback:function(){this.parent().find(".buy_button").find("[data-localize]").localize("site",{pathPrefix:"i18n",language:$.localStorage.get("jq-appLang")})}})})}(window,document,window.jQuery);